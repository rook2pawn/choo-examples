<html>
<head>
	<script src="materialize.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="materialize.min.css">
</head>
<style>
pre {
  background-color:#efefef;
  border-radius:7px;
  padding-left:20px;
}
.content {
  padding-top:2em;
}
button {
	font-size:20px;
}
</style>
<body>
  <nav>
    <div class="nav-wrapper">
      <div class="container">
        <a href="https://github.com/rook2pawn/choo-examples" class="brand-logo right"><img style="margin-right: 20px;margin-top: 16px;" src="GitHub-Mark-32px.png"></a>
        <ul id="nav-mobile" class="left hide-on-med-and-down">
          <li><a href="#">Nanocomponent Nested Buttons</a></li>
          <li><a href="">Input Example</a></li>
          <li><a href="">Submit-Confirm Example</a></li>
        </ul>
      </div>
    </div>
  </nav>
  <div class='container content'>
  	<div id="nestedbuttonsexample"></div>
  	<h2>Nested buttons example</h2>

  	<pre><code class="javascript language-javascript">
var choo = require('choo')
var html = require('choo/html')
var Nanocomponent = require('nanocomponent')

class Button extends Nanocomponent {
  constructor () {
    super()
    this.button = null
  }

  createElement (button) {
    // important we use a copy because if we change state
    // later we don't want that to effect this directly
    this.button = Object.assign({}, button);
    return html`
      &lt;button style="background-color: ${button.backgroundColor}; color: ${button.color}"&gt;
        Click Me
      &lt;/button&gt;
    `
  }

  update (newButton) {
    return newButton.backgroundColor !== this.button.backgroundColor
  }
}

class ButtonManager extends Nanocomponent {
  constructor () {
    super()
    this.buttons = null
  }

  createElement (buttons) {
    this.buttons = buttons.map((button) =&gt; new Button)
    return html`&lt;div&gt;${this.buttons.map((button,idx) =&gt; button.render(buttons[idx]))}&lt;/div&gt;`
  }

  update (newButtons) {
    newButtons.forEach((newButton,idx) =&gt; {
      this.buttons[idx].render(newButton)
    })
    return false;
  }
}

var bm = new ButtonManager;
var app = choo()
app.route('/', mainView)
app.mount('body')


var mr = require('mrcolor');
const invert = require('invert-color');

var getColor = mr();
const getRandomColor = function() {
  var color = getColor().rgb();

  var foregroundColor= invert(color)
  var backgroundColor = `rgb(${color.join(',')})`;
  return {color:foregroundColor, backgroundColor}
}

app.use((state, emitter) =&gt; {
  state.buttons = Array(5).fill().map(() =&gt; getRandomColor());
  setInterval(() =&gt; {
    const index = ~~(Math.random()*state.buttons.length)
    const colorObj = getRandomColor();
    state.buttons[index].color = colorObj.color;
    state.buttons[index].backgroundColor = colorObj.backgroundColor;
    emitter.emit('render');
  }, 500)
})
function mainView (state, emit) {
  return html`&lt;body&gt;
  ${bm.render(state.buttons)}
  &lt;/body&gt;`
}
  	</code></pre>
  </div>

	<script src="bundle.js"></script>
</body>
</html>
